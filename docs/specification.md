# Техническое задание: Telegram бот для AmoCRM

## 1. Общее описание
Система состоит из:
- Telegram бота для сотрудников
- Интеграции с AmoCRM
- Административной панели

## 2. Функциональные требования

### 2.1. Функционал для сотрудников
- **Регистрация в системе**:
  - При первом входе сбор данных (ФИО, телефон)
  - Привязка к группе в AmoCRM

- **Создание задач**:
  - Многоуровневое меню с кнопками
  - Выбор типа проблемы
  - Указание приоритета
  - Прикрепление медиа (фото, аудио)
  - Свободный текст для "Другое"

- **Просмотр задач**:
  - Список всех задач пользователя
  - Фильтрация по статусу
  - Просмотр комментариев из AmoCRM

- **Закрытие задач**:
  - Подтверждение закрытия
  - Возможность добавить финальный комментарий

### 2.2. Функционал администратора
- **Управление группами**:
  - Создание/редактирование групп
  - Назначение сотрудников

- **Настройки бота**:
  - Тексты сообщений
  - Доступные типы проблем
  - Приоритеты задач

- **Мониторинг**:
  - Статистика по задачам
  - Время реакции
  - Загрузка исполнителей

### 2.3. Интеграция с AmoCRM
- **Сущности**:
  - Сделки = задачи
  - Контакты = сотрудники
  - Компании = группы

- **Поля**:
  - Приоритет (кастомное поле)
  - Тип проблемы (кастомное поле)
  - Ссылка на медиафайлы

## 3. Технические требования
- **Сервер**:
  - PHP 8.1+
  - MySQL 5.7+
  - SSL сертификат
  - Минимум 2GB RAM

- **API**:
  - Telegram Bot API
  - AmoCRM REST API
  - OAuth 2.0 авторизация

## 4. Сценарии использования

### 4.1. Создание задачи
1. Сотрудник нажимает "Новая задача"
2. Выбирает тип проблемы
3. Указывает приоритет
4. Прикрепляет медиа (опционально)
5. Подтверждает отправку
6. Система создает сделку в AmoCRM

### 4.2. Закрытие задачи
1. Сотрудник нажимает "Закрыть задачу"
2. Выбирает задачу из списка
3. Добавляет комментарий (опционально)
4. Подтверждает закрытие
5. Система обновляет статус в AmoCRM

## 5. Требования к интерфейсу
- **Telegram бот**:
  - Интуитивное меню
  - Четкие тексты кнопок
  - Быстрые ответы (<1 сек)

- **AmoCRM**:
  - Отдельный pipeline для задач
  - Настраиваемые воронки
  - Виджеты для быстрого доступа

## 6. Безопасность
- Валидация входящих данных
- Шифрование чувствительной информации
- Ограничение доступа по ролям
- Логирование действий